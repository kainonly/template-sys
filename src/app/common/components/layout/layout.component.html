<div style="height: 100%">
  <div class="header">
    <nz-row nzJustify="space-between">
      <nz-col>
        <nz-space [nzSplit]="split">
          <ng-template #split>
            <nz-divider nzType="vertical"></nz-divider>
          </ng-template>
          <ng-container *nzSpaceItem>
            <button nz-button nzType="text" [routerLink]="!app.inSettings ? '/settings' : '/'">
              <span nz-icon [nzType]="!app.inSettings ? 'appstore' : 'arrow-left'"></span>
            </button>
          </ng-container>
          <nz-breadcrumb *nzSpaceItem class="breadcrumb" nzAutoGenerate>
            <nz-breadcrumb-item *ngIf="!app.inSettings">
              <a i18n routerLink="/"> 首页 </a>
            </nz-breadcrumb-item>
          </nz-breadcrumb>
        </nz-space>
      </nz-col>
      <nz-col> </nz-col>
      <nz-col>
        <div class="center" (click)="profile()">
          <ng-container *ngIf="app.user as u">
            <nz-badge nzDot>
              <ng-container *ngIf="!!u.avatar; else defaultAvatar">
                <nz-avatar nzShape="square" [nzSize]="25" [nzSrc]="[u.avatar] | wpxAssets"></nz-avatar>
              </ng-container>
              <ng-template #defaultAvatar>
                <nz-avatar nzShape="square" [nzSize]="25" nzIcon="user"></nz-avatar>
              </ng-template>
            </nz-badge>
            <span class="username">
              <ng-container *ngIf="!u.name; else name">
                {{ u.email | uppercase }}
              </ng-container>
              <ng-template #name>
                {{ u.name | uppercase }}
              </ng-template>
            </span>
          </ng-container>
        </div>
      </nz-col>
    </nz-row>
  </div>
  <router-outlet></router-outlet>
</div>

<ng-template #profileTitleTpl>
  <nz-row nzJustify="space-between">
    <nz-col><span i18n>个人中心</span></nz-col>
    <nz-col></nz-col>
    <nz-col>
      <button nz-button nzType="text" (click)="logout()" i18n> 退出系统 </button>
    </nz-col>
  </nz-row>
</ng-template>
